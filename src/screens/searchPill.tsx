import React, { useState } from 'react';
import {
  View,
  Text,
  TextInput,
  TouchableOpacity,
  StyleSheet,
  SafeAreaView,
  FlatList,
  Image,
} from 'react-native';
import { NavigationProp, useNavigation } from '@react-navigation/native';
import { useFavorites } from '../context/favorites';

type Pill = {
  id: string;
  name: string;
  image: string;
  effect: string;
  caution: string;
};

const dummyPills: Pill[] = [
  {
    id: '1',
    name: '알레그라정 200mg',
    image: 'data:image/png;base64,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',
    effect: '알레르기 완화, 가려움증 개선',
    caution: '운전 시 주의, 졸음 유발 가능',
  },
  {
    id: '2',
    name: '타이레놀 500mg',
    image: 'data:image/png;base64,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',
    effect: '해열 및 진통 완화',
    caution: '간 손상 위험, 복용량 초과 금지',
  },
];

const SearchPillScreen = () => {
  const [searchText, setSearchText] = useState('');
  const { favorites, toggleFavorite } = useFavorites();
  const navigation = useNavigation<NavigationProp<any>>();

  const filteredPills = dummyPills.filter((pill) =>
    pill.name.includes(searchText)
  );

  const renderPillItem = ({ item }: { item: Pill }) => (
    <TouchableOpacity
      style={styles.pillItem}
      onPress={() =>
        navigation.navigate('PillDetail', {
          id: item.id,
          name: item.name,
          image: item.image,
          effect: item.effect,
          caution: item.caution,
        })
      }
    >
      <Image source={{ uri: item.image }} style={styles.pillImage} />
      <View style={styles.pillDetails}>
        <Text style={styles.pillName}>{item.name}</Text>
        <Text style={styles.pillEffect}>{item.effect}</Text>
        <Text style={styles.DetailText}>자세히 보기</Text>
      </View>
      <TouchableOpacity onPress={() => toggleFavorite(item.id)} style={styles.favoriteButton}>
        <Text style={[styles.favoriteIcon, favorites.includes(item.id) && styles.favoriteIconActive]}>
          ♥
        </Text>
      </TouchableOpacity>
    </TouchableOpacity>
  );

  return (
    <SafeAreaView style={styles.safeArea}>
      <View style={styles.container}>
        <TextInput
          style={styles.searchInput}
          placeholder="검색어를 입력하세요."
          value={searchText}
          onChangeText={setSearchText}
        />
        <FlatList
          data={filteredPills}
          keyExtractor={(item) => item.id}
          renderItem={renderPillItem}
        />
      </View>
    </SafeAreaView>
  );
};

const styles = StyleSheet.create({
  safeArea: { flex: 1 },
  container: { flex: 1, padding: 20 },
  searchInput: { borderWidth: 1, borderColor: '#CCC', borderRadius: 8, padding: 10, marginBottom: 20 },
  pillItem: { flexDirection: 'row', padding: 10, marginBottom: 10, borderWidth: 1, borderRadius: 8 },
  pillImage: { width: 50, height: 50, marginRight: 10 },
  pillDetails: { flex: 1 },
  pillName: { fontSize: 18, fontWeight: 'bold' },
  pillEffect: { color: '#6E83B7'},
  DetailText: { color: '#FF6B6B'},
  favoriteButton: { padding: 10 },
  favoriteIcon: { fontSize: 20, color: '#CCC' },
  favoriteIconActive: { color: '#FF6B6B' },
});

export default SearchPillScreen;